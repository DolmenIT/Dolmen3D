(()=>{"use strict";var __webpack_modules__={134:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>d3d_loader});var _dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(269);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d3d_loader=_createClass((function d3d_loader(){_classCallCheck(this,d3d_loader),this.loadScene=function(scene_path,p_params){_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.debug.log("d3d_loader.loadScene:"+scene_path),_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.render.ready=!1;try{_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.file.loadJS(scene_path,p_params).then((function(response){void 0!==response.p_params&&(_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.params.reset(),_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.params.setAll(response.p_params)),eval(response.data),_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.render.ready=!0}))}catch(e){_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.debug.error("Erreur lors du chargement de la scene :",e)}},_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.debug.log("d3d_loader.constructor")}))},269:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,{i:()=>le});var s=i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!0,this.urlsend=!1,this.log=function(e){if(t.enabled)if(t.urlsend){var r="/debug=".concat(encodeURIComponent(e));fetch(r,{method:"GET",headers:{Accept:"application/json"}})}else t.d3dDebugDiv.innerHTML=le.debug.getCurrentTimestamp()+" : "+e+"<br />"+String(t.d3dDebugDiv.innerHTML).substring(0,1e3)},this.error=function(e){if(t.enabled)if(t.urlsend){var r="/debug=".concat(encodeURIComponent(e));fetch(r,{method:"GET",headers:{Accept:"application/json"}})}else t.d3dDebugDiv.innerHTML=le.debug.getCurrentTimestamp()+" : "+e+"<br />"+String(t.d3dDebugDiv.innerHTML).substring(0,1e3)},this.getCurrentTimestamp=function(){var e=new Date;return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")+":"+Math.floor(performance.now()).toString().slice(-3)},this.disable=function(){console.log("d3d_debug.disable"),t.enabled=!1},console.log("d3d_debug.constructor"),this.d3dDebugDiv=document.createElement("div"),this.d3dDebugDiv.className="d3d_debug",this.d3dDebugDiv.style.position="absolute",this.d3dDebugDiv.style.top="0",this.d3dDebugDiv.style.left="0",this.d3dDebugDiv.style.width="calc(100vw / 3)",this.d3dDebugDiv.style.height="100vh",this.d3dDebugDiv.style.color="white",this.d3dDebugDiv.style.backgroundColor="hsla(210,75%,25%,0.25)",this.d3dDebugDiv.style.overflow="hidden",this.d3dDebugDiv.style.padding="0.5vw",this.d3dDebugDiv.style.fontFamily="arial",this.d3dDebugDiv.style.fontSize="0.7vw",this.d3dDebugDiv.style.lineHeight="0.9vw",this.d3dDebugDiv.style.borderRadius="0 0 calc(100vw / 3) 0",this.d3dDebugDiv.style.border="solid 0 transparent",this.d3dDebugDiv.style.boxShadow="inset 0 0 5vw 5vw hsla(210,75%,50%,0.5), 0 0 0.5vw 0.5vw hsla(0,0%,0%,0.25), inset 0 0 1vw 0 hsla(210,75%,50%,0.5)",this.d3dDebugDiv.style.textShadow="0.05vw 0.05vw 0.1vw black",this.d3dDebugDiv.style.fontWeight="600",document.body.appendChild(this.d3dDebugDiv)})),a=r(134);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}function u(e,t,r){return t&&l(e.prototype,t),r&&l(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var c=u((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetchJSON=function(e){return le.debug.log("d3d_file.fetchJSON:"+e),new Promise((function(t,r){if(void 0===window.nativeInterface)fetch(e).then((function(e){e.ok?t(e.json()):r(new Error("Erreur lors du chargement du fichier JSON."))})).catch((function(e){r(e)}));else try{var n=JSON.parse(window.nativeInterface.fetchJSON(e));t(n)}catch(e){r(e)}}))},this.loadJS=function(e,t){return new Promise((function(r,n){if(void 0===window.nativeInterface)fetch(e).then((function(e){e.ok?e.text().then((function(e){r({data:e,p_params:t})})).catch((function(e){n(e)})):n(new Error("Erreur lors du chargement du fichier JS."))})).catch((function(e){n(e)}));else try{var o=window.nativeInterface.loadJS(e);r({data:o,p_params:t})}catch(e){n(e)}}))},le.debug.log("d3d_file.constructor")}));function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==f(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===f(o)?o:String(o)),n)}var o}function b(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var m=b((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!0,this.update=function(){var e,r=window.performance.memory.usedJSHeapSize;e=r<1048576?(r/1024).toFixed(2)+" KB":r<1073741824?(r/1048576).toFixed(2)+" MB":(r/1073741824).toFixed(2)+" GB",t.d3d_monitor_memory.innerText="Memory usage : "+e,t.d3d_monitor_target.innerText="Target FPS : "+le.render.max_fps,t.d3d_monitor_fps.innerText="Current FPS : "+le.render.current_fps,t.d3d_monitor_speed.innerText="Frame speed : "+le.render.ms_fps,setTimeout(le.monitor.update,1e3)},console.log("d3d_debug.constructor"),this.d3d_monitor_div=document.createElement("div"),this.d3d_monitor_div.className="d3d_monitor",this.d3d_monitor_div.style.position="absolute",this.d3d_monitor_div.style.top="0",this.d3d_monitor_div.style.left="90vw",this.d3d_monitor_div.style.width="10vw",this.d3d_monitor_div.style.height="5vw",this.d3d_monitor_div.style.color="white",this.d3d_monitor_div.style.backgroundColor="hsla(210,75%,25%,0.25)",this.d3d_monitor_div.style.overflow="hidden",this.d3d_monitor_div.style.padding="0.5vw",this.d3d_monitor_div.style.fontFamily="arial",this.d3d_monitor_div.style.fontSize="0.7vw",this.d3d_monitor_div.style.lineHeight="0.9vw",this.d3d_monitor_div.style.borderRadius="0 0 0 5vw",this.d3d_monitor_div.style.border="solid 0 transparent",this.d3d_monitor_div.style.boxShadow="inset 0 0 5vw 5vw hsla(210,75%,50%,0.5), 0 0 0.5vw 0.5vw hsla(0,0%,0%,0.25), inset 0 0 1vw 0 hsla(210,75%,50%,0.5)",this.d3d_monitor_div.style.textShadow="0.05vw 0.05vw 0.1vw black",this.d3d_monitor_div.style.fontWeight="600",document.body.appendChild(this.d3d_monitor_div),this.d3d_monitor_memory=document.createElement("div"),this.d3d_monitor_memory.id="d3d_monitor_memory",this.d3d_monitor_memory.style.textAlign="right",this.d3d_monitor_div.appendChild(this.d3d_monitor_memory),this.d3d_monitor_target=document.createElement("div"),this.d3d_monitor_target.id="d3d_monitor_target",this.d3d_monitor_target.style.textAlign="right",this.d3d_monitor_div.appendChild(this.d3d_monitor_target),this.d3d_monitor_fps=document.createElement("div"),this.d3d_monitor_fps.id="d3d_monitor_fps",this.d3d_monitor_fps.style.textAlign="right",this.d3d_monitor_div.appendChild(this.d3d_monitor_fps),this.d3d_monitor_speed=document.createElement("div"),this.d3d_monitor_speed.id="d3d_monitor_speed",this.d3d_monitor_speed.style.textAlign="right",this.d3d_monitor_div.appendChild(this.d3d_monitor_speed),setTimeout(this.update,1e3)}));function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==y(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===y(o)?o:String(o)),n)}var o}function v(e,t,r){return t&&g(e.prototype,t),r&&g(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var _=v((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.from=function(e){le.debug.log("d3d_properties.from:"+JSON.stringify(e));var t={};return void 0!==e&&(void 0!==e.power&&(t.pow=e.power),void 0!==e.target&&(t.tx=e.target[0],t.ty=e.target[1],t.tz=e.target[2]),void 0!==e.position&&(t.px=e.position[0],t.py=e.position[1],t.pz=e.position[2]),void 0!==e.center&&(t.px=e.center[0],t.py=e.center[1],t.pz=e.center[2]),void 0!==e.size&&(t.sx=e.size[0],t.sy=e.size[1],t.sz=e.size[2])),t},le.debug.log("d3d_properties.constructor")}));function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===h(o)?o:String(o)),n)}var o}function S(e,t,r){return t&&w(e.prototype,t),r&&w(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var x=S((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.max_fps=30,this.ms_fps=34,this.lasttime_fps=Date.now(),this.current_fps=0,this.frames=0,this.ready=!1,this.loop=!0,this.modeName="",this.onWindowResize=function(){le.debug.log("d3d_render.start"),le.render.renderer.setSize(window.innerWidth,window.innerHeight),void 0!==le.render.camera&&(le.render.camera.aspect=window.innerWidth/window.innerHeight,le.render.camera.updateProjectionMatrix())},this.maxFPS=function(e){le.debug.log("d3d_render.maxFPS : "+e),le.render.max_fps=e,le.render.ms_fps=Math.ceil(1e3/le.render.max_fps)},this.mode=function(e){le.debug.log("d3d_render.mode : "+e),le.render.modeName=e},this.render=function(e,t){if(le.render.started=!0,"webxr"==le.render.modeName&&le.debug.log("d3d_render.render"),le.render.ready)if(le.scenes.currentScene){le.render.frames++;var r=Date.now();if(r>le.render.lasttime_fps+1e3&&(le.render.current_fps=Math.round((le.render.frames+le.render.current_fps)/2),le.render.frames=0,le.render.lasttime_fps=r,le.render.current_fps<le.render.max_fps?le.render.ms_fps>1&&(le.render.ms_fps-=1):le.render.current_fps>le.render.max_fps&&(le.render.ms_fps+=2)),"webxr"==le.render.modeName)try{le.animate.apply().then((function(){le.render.renderer.render(le.scenes.getScene("example_1"),le.render.camera),le.render.loop&&setTimeout(le.render.render,le.render.ms_fps)}))}catch(e){le.debug.log("d3d_webxr.updateViewer:"+e.toString())}else le.animate.apply().then((function(){le.render.renderer.render(le.scenes.getScene("example_1"),le.render.camera),le.render.loop&&setTimeout(le.render.render,le.render.ms_fps)}))}else le.render.loop&&setTimeout(le.render.render,100);else le.render.loop&&setTimeout(le.render.render,1e3)}}));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function P(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var O=P((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scenes={},this.scenesWithObjects={},this.persistentObjects={},this.currentScene=null,this.setScene=function(e){le.debug.log("d3d_scenes.setScene:"+e),e in le.scenes.scenes||(le.scenes.scenes[e]=new THREE.Scene,le.scenes.scenesWithObjects[e]={}),le.scenes.currentScene=e},this.getScene=function(){if(le.scenes.currentScene)return le.scenes.scenes[le.scenes.currentScene]||null;le.debug.log("d3d_scenes.getScene: Scene is not defined")},this.destructScene=function(e){for(var t in le.debug.log("d3d_scenes.destructScene:"+e),le.scenes.scenesWithObjects[e])void 0!==le.scenes.scenesWithObjects[e][t]&&le.scenes.scenesWithObjects[e][t].remove(),delete le.scenes.scenesWithObjects[e][t];delete le.scenes.scenesWithObjects[e]},this.addObject=function(e,t){le.debug.log("d3d_scenes.addObject:"+e),le.scenes.currentScene?(le.scenes.scenesWithObjects[le.scenes.currentScene][e]=t,le.scenes.scenes[le.scenes.currentScene].add(t)):le.debug.log("d3d_scenes.addObject: Scene is not defined")},this.addObjects=function(e){for(var t in e)le.scenes.addObject(t,e[t])},this.getObject=function(e){if(le.scenes.currentScene)return le.scenes.scenesWithObjects[le.scenes.currentScene][e]||null;le.debug.log("d3d_scenes.getObject: Scene is not defined")},this.addPersistant=function(e,t){if(le.debug.log("d3d_scenes.addPersistant:"+e),!le.scenes.persistentObjects[e])return le.scenes.persistentObjects[e]=t,le.scenes.persistentObjects[e];t instanceof HTMLElement&&t.remove()},le.debug.log("d3d_scenes.constructor")}));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function D(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}function R(e,t,r){return t&&D(e.prototype,t),r&&D(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var k=R((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.camera=function(e){le.debug.log("d3d_object.camera:"+JSON.stringify(e));var t=le.properties.from(e),r=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(t.px,t.py,t.pz);var n=new THREE.Vector3(t.tx,t.ty,t.tz);return r.lookAt(n),r},this.ambientlight=function(e){le.debug.log("d3d_object.ambientlight:"+JSON.stringify(e));var t=le.properties.from(e);return new THREE.AmbientLight(16777215,t.pow)},this.pointlight=function(e){le.debug.log("d3d_object.pointlight:"+JSON.stringify(e));var t=le.properties.from(e),r=new THREE.PointLight(16777215,t.pow,0,2);return r.position.set(t.px,t.py,t.pz),r},this.directionallight=function(e){le.debug.log("d3d_object.directionallight:"+JSON.stringify(e));var t=le.properties.from(e),r=new THREE.DirectionalLight(65280,t.pow);return r.position.set(t.px,t.py,t.pz),r.target.position.set(t.tx,t.ty,t.tz),r},this.spotlight=function(e){le.debug.log("d3d_object.spotlight:"+JSON.stringify(e));var t=le.properties.from(e),r=new THREE.SpotLight(255,.25,100,Math.PI/6,.25);return r.position.set(t.px,t.py,t.pz),r.target.position.set(t.tx,t.ty,t.tz),r},le.debug.log("d3d_object.constructor")}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===C(o)?o:String(o)),n)}var o}function z(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var A=z((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.materials={},this.create=function(e,r){var n;le.debug.log("d3d_materials.create:"+e+", "+JSON.stringify(r)),void 0!==r.basic?n=new THREE.MeshBasicMaterial(r.basic):void 0!==r.phong&&(n=new THREE.MeshPhongMaterial(r.phong)),t.materials[e]=n},this.creates=function(e){for(var r in le.debug.log("d3d_materials.creates:"+JSON.stringify(e)),e)t.create(r,e[r])},this.get=function(e){return t.materials[e]||null},le.debug.log("d3d_materials.constructor")}));function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}function X(e,t,r){return t&&W(e.prototype,t),r&&W(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var N=X((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cube=function(e){le.debug.log("d3d_geometry.cube:"+JSON.stringify(e));var t=le.properties.from(e),r=new THREE.BoxGeometry(t.sx,t.sy,t.sz),n=new THREE.Mesh(r,le.materials.get(e.material));return n.position.set(t.px,t.py,t.pz),n},le.debug.log("d3d_geometry.constructor")}));function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function I(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var J=I((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.animateWithObjects={rotate:{},translate:{}},this.lastApplyTimestamp=performance.now(),this.apply=function(){return new Promise((function(e,r){try{"webxr"==le.render.modeName&&le.debug.log("d3d_animate.apply");var n=performance.now(),o=n-t.lastApplyTimestamp;for(var i in t.lastApplyTimestamp=n,t.animateWithObjects.rotate)t.rotateApply(i,o);for(var s in t.animateWithObjects.translate)t.translateApply(s,o);e()}catch(e){r(e)}}))},this.rotate=function(e,r){"speed"in r&&("unit"in r||(r.unit="degree"),"degree"==r.unit&&(r.speed[0]=le.math.rad(r.speed[0]),r.speed[1]=le.math.rad(r.speed[1]),r.speed[2]=le.math.rad(r.speed[2])),r.speed[0]=r.speed[0]/1e3,r.speed[1]=r.speed[1]/1e3,r.speed[2]=r.speed[2]/1e3,t.animateWithObjects.rotate[e]=r)},this.rotateApply=function(e,r){var n=le.scenes.getObject(e);if(void 0!==n){var o=t.animateWithObjects.rotate[e];n.rotation.x+=o.speed[0]*r,n.rotation.y+=o.speed[1]*r,n.rotation.z+=o.speed[2]*r}},this.translate=function(e,r){"speed"in r&&(r.speed[0]=r.speed[0]/1e3,r.speed[1]=r.speed[1]/1e3,r.speed[2]=r.speed[2]/1e3,t.animateWithObjects.translate[e]=r)},this.translateApply=function(e,r){var n=le.scenes.getObject(e);if(void 0!==n){var o=t.animateWithObjects.translate[e];if(n.position.x+=o.speed[0]*r,n.position.y+=o.speed[1]*r,n.position.z+=o.speed[2]*r,"range"in o){if(Array.isArray(o.range[0]))if(n.position.x<o.range[0][0]){var i=n.position.x-o.range[0][0];n.position.x=o.range[0][0]+i,o.speed[0]=-o.speed[0]}else if(n.position.x>o.range[0][1]){var s=n.position.x-o.range[0][1];n.position.x=o.range[0][1]-s,o.speed[0]=-o.speed[0]}if(Array.isArray(o.range[1]))if(n.position.y<o.range[1][0]){var a=n.position.y-o.range[1][0];n.position.y=o.range[1][0]+a,o.speed[1]=-o.speed[1]}else if(n.position.y>o.range[1][1]){var d=n.position.y-o.range[1][1];n.position.y=o.range[1][1]-d,o.speed[1]=-o.speed[1]}if(Array.isArray(o.range[2]))if(n.position.z<o.range[2][0]){var l=n.position.z-o.range[2][0];n.position.z=o.range[2][0]+l,o.speed[2]=-o.speed[2]}else if(n.position.z>o.range[2][1]){var u=n.position.z-o.range[2][1];n.position.z=o.range[2][1]-u,o.speed[2]=-o.speed[2]}}}},le.debug.log("d3d_animate.constructor")}));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===V(o)?o:String(o)),n)}var o}function K(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var U=K((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.str=function(e){return 0},this.hex=function(e){return 0},le.debug.log("d3d_color.constructor")}));function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===q(o)?o:String(o)),n)}var o}function Q(e,t,r){return t&&G(e.prototype,t),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Y=Q((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pi=3.14159265,this.pi2=6.2831853,this.deg=function(e){return e/t.pi*180},this.rad=function(e){return e/180*t.pi},le.debug.log("d3d_math.constructor")}));function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Z(o)?o:String(o)),n)}var o}function ee(e,t,r){return t&&$(e.prototype,t),r&&$(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var te=ee((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e){le.debug.log("d3d_webgl.init"),le.webgl.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),le.webgl.renderer.setPixelRatio(window.devicePixelRatio),le.webgl.renderer.setSize(window.innerWidth,window.innerHeight),le.webgl.renderer.shadowMap.enabled=!0,le.webgl.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(le.webgl.renderer.domElement),le.render.renderer=le.webgl.renderer,le.render.camera=le.webgl.camera,window.addEventListener("resize",le.webgl.onWindowResize,!1)},this.setCamera=function(e){le.webgl.camera=e,le.render.camera=le.webgl.camera},this.start=function(){le.debug.log("d3d_webgl.start"),le.webgl.render()},this.stop=function(){le.debug.log("d3d_webgl.stop")},this.render=function(){le.debug.log("d3d_webgl.render"),le.render.mode("webgl"),le.render.started||le.render.render()},le.debug.log("d3d_webgl.constructor")}));function re(e){return re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},re(e)}function ne(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==re(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==re(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===re(o)?o:String(o)),n)}var o}var oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewer={position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}},this.sessionInit=null,this.currentSession=null,this.XRButton=null,this.mode=null,this.referenceSpace=null,this.enable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};le.debug.log("d3d_webxr.enable"),le.webxr.sessionInit=e,le.webxr.XRButton=document.createElement("button"),le.webxr.enableButton(),"xr"in navigator?navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?(le.webxr.mode="immersive-ar",le.webxr.enableButton()):navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?(le.webxr.mode="immersive-vr",le.webxr.enableButton()):le.webxr.showXRNotSupported()})).catch(le.webxr.showXRNotAllowed)})).catch(le.webxr.showXRNotAllowed):!1===window.isSecureContext?le.debug.log("WEBXR NEEDS HTTPS"):le.debug.log("WEBXR NOT AVAILABLE")},this.enableButton=function(){le.debug.log("d3d_webxr.enableButton"),le.webxr.XRButton.id="XRButton",le.webxr.XRButton.style.display="button",le.webxr.XRButton.style.cursor="pointer",le.webxr.XRButton.style.left="calc(50% - 50px)",le.webxr.XRButton.style.width="100px",le.webxr.XRButton.style.position="absolute",le.webxr.XRButton.style.bottom="20px",le.webxr.XRButton.style.padding="12px 6px",le.webxr.XRButton.style.border="1px solid #fff",le.webxr.XRButton.style.borderRadius="4px",le.webxr.XRButton.style.background="hsla(0,0%,100%,0.5)",le.webxr.XRButton.style.color="hsla(0,0%,0%,0.75)",le.webxr.XRButton.style.font="normal 13px sans-serif",le.webxr.XRButton.style.textAlign="center",le.webxr.XRButton.style.opacity="0.5",le.webxr.XRButton.style.outline="none",le.webxr.XRButton.style.zIndex="999",le.webxr.XRButton.textContent="START XR",le.webxr.XRButton=document.body.appendChild(le.webxr.XRButton),le.webxr.XRButton.addEventListener("click",(function(){le.webxr.onClick()}))},this.onClick=function(){le.debug.urlsend=!0,le.debug.log("d3d_webxr.onClick"),null===le.webxr.currentSession?(le.render.renderer.xr.enabled=!0,navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(le.webxr.onSessionStarted)):le.webxr.currentSession.end()},this.onSessionStarted=function(e){le.debug.log("d3d_webxr.onSessionStarted"),e.addEventListener("end",le.webxr.onSessionEnded),le.webxr.currentSession=e,le.render.renderer.xr.setSession(le.webxr.currentSession),le.webxr.start()},this.onSessionEnded=function(){le.debug.log("d3d_webxr.onSessionEnded"),le.webxr.currentSession.removeEventListener("end",le.webxr.onSessionEnded),le.webxr.currentSession=null,le.debug.urlsend=!1},this.showXRNotSupported=function(){le.debug.log("d3d_webxr.showXRNotSupported"),le.debug.log("XR NOT SUPPORTED")},this.showXRNotAllowed=function(e){le.debug.log("d3d_webxr.showXRNotAllowed"),le.debug.log("Exception when trying to call xr.isSessionSupported",e)},this.start=function(){le.debug.log("d3d_webxr.start"),le.webxr.render()},this.stop=function(){le.webgl.start()},this.updateViewer=function(e){le.debug.log("d3d_webxr.updateViewer");try{le.debug.log("d3d_webxr.updateViewer:1");var t=e.getViewerPose(le.webxr.referenceSpace);le.debug.log("d3d_webxr.updateViewer:2"),t&&(le.debug.log("d3d_webxr.updateViewer:3"),t.views.forEach((function(e){le.debug.log("d3d_webxr.updateViewer:4");var t=e.transform.position,r=e.transform.orientation;le.debug.log("d3d_webxr.updateViewer:"+t.x+":"+t.y+":"+t.z),le.webxr.viewer.position={x:t.x,y:t.y,z:t.z},le.webxr.viewer.orientation={x:r.x,y:r.y,z:r.z}})),le.debug.log("d3d_webxr.updateViewer:5"))}catch(e){le.debug.log("d3d_webxr.updateViewer:"+e.toString())}le.debug.log("d3d_webxr.updateViewer:6")},this.render=function(){le.debug.log("d3d_webxr.render"),le.render.mode("webxr"),le.render.started||(le.render.loop=!1,le.render.renderer.setAnimationLoop(le.render.render))},le.debug.log("d3d_webxr.constructor")}var t,r;return t=e,(r=[{key:"getPosition",value:function(){return le.webxr.viewer.position}},{key:"getOrientation",value:function(){return le.webxr.viewer.orientation}}])&&ne(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ie(o)?o:String(o)),n)}var o}function ae(e,t,r){return t&&se(e.prototype,t),r&&se(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var de=ae((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(){console.log("dolmen3d.init"),le.debug=new s,le.loader=new a.l,le.file=new c,le.monitor=new m,le.properties=new _,le.render=new x,le.scenes=new O,le.object=new k,le.materials=new A,le.geometry=new N,le.animate=new J,le.color=new U,le.math=new Y,le.webgl=new te,le.webxr=new oe},this.start=function(){console.log("dolmen3d.start"),le.webgl.init(),le.webgl.start()},this.onLoad=function(e){console.log("dolmen3d.onLoad"),le.callback=e},this.tryCallback=function(){console.log("dolmen3d.tryCallback"),"function"==typeof le.callback?(console.log("dolmen3d.tryCallback.callback"),le.callback()):(console.log("dolmen3d.tryCallback.settimeout"),setTimeout((function(){le.tryCallback()}),100))},console.log("dolmen3d.constructor")}));window.d3d=new de;var le=window.d3d;le.init(),window.addEventListener("load",(function(e){le.start(),setTimeout(le.tryCallback(),100)}))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__=__webpack_require__(269)})();