(()=>{"use strict";var __webpack_modules__={134:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>d3d_loader});var _dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(179);function _typeof(e){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(e)}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_toPropertyKey(n.key),n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _toPropertyKey(e){var t=_toPrimitive(e,"string");return"symbol"===_typeof(t)?t:String(t)}function _toPrimitive(e,t){if("object"!==_typeof(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d3d_loader=_createClass((function d3d_loader(){_classCallCheck(this,d3d_loader),this.loadScene=function(scene_path,p_params){_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.render.ready=!1;try{_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.native.loadJS(scene_path,p_params).then((function(response){void 0!==response.p_params&&(_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.params.reset(),_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.params.setAll(response.p_params)),eval(response.data),_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.render.ready=!0}))}catch(e){_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.debug.error("Erreur lors du chargement de la scene :",e)}},_dolmen3d_js__WEBPACK_IMPORTED_MODULE_0__.i.debug.log("d3d_loader.constructor")}))},179:(e,t,r)=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(i)?i:String(i)),o)}var i}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}r.d(t,{i:()=>ue});var a=i((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!0,this.urlsend=!1,this.log=function(e){if(t.enabled)if(t.urlsend){var r="/debug=".concat(encodeURIComponent(e));fetch(r,{method:"GET",headers:{Accept:"application/json"}})}else t.d3dDebugDiv.innerHTML=ue.debug.getCurrentTimestamp()+" : "+e+"<br />"+String(t.d3dDebugDiv.innerHTML).substring(0,1e3)},this.getCurrentTimestamp=function(){var e=new Date;return e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")+":"+Math.floor(performance.now()).toString().slice(-3)},this.disable=function(){console.log("d3d_debug.disable"),t.enabled=!1},console.log("d3d_debug.constructor"),this.d3dDebugDiv=document.createElement("div"),this.d3dDebugDiv.className="d3d_debug",this.d3dDebugDiv.style.position="absolute",this.d3dDebugDiv.style.top="1vw",this.d3dDebugDiv.style.left="1vw",this.d3dDebugDiv.style.width="calc(100vw / 3)",this.d3dDebugDiv.style.height="calc(100vh - 2vw)",this.d3dDebugDiv.style.color="white",this.d3dDebugDiv.style.backgroundColor="hsla(210,75%,25%,0.5)",this.d3dDebugDiv.style.overflow="hidden",this.d3dDebugDiv.style.padding="0.5vw",this.d3dDebugDiv.style.fontFamily="arial",this.d3dDebugDiv.style.fontSize="0.7vw",this.d3dDebugDiv.style.lineHeight="0.9vw",this.d3dDebugDiv.style.borderRadius="0.5vw",this.d3dDebugDiv.style.border="solid 0 transparent",this.d3dDebugDiv.style.boxShadow="inset 0 0 0.05vw 0.05vw hsla(210,75%,50%,0.5), 0 0 0.05vw 0.05vw hsla(210,75%,50%,0.5), inset 0 0 5vw 0 hsla(210,75%,50%,0.25)",document.body.appendChild(this.d3dDebugDiv)}));function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function u(e,t,r){return t&&d(e.prototype,t),r&&d(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var l=u((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.from=function(e){ue.debug.log("d3d_properties.from:"+JSON.stringify(e));var t={};return void 0!==e&&(void 0!==e.power&&(t.pow=e.power),void 0!==e.target&&(t.tx=e.target[0],t.ty=e.target[1],t.tz=e.target[2]),void 0!==e.position&&(t.px=e.position[0],t.py=e.position[1],t.pz=e.position[2]),void 0!==e.center&&(t.px=e.center[0],t.py=e.center[1],t.pz=e.center[2]),void 0!==e.size&&(t.sx=e.size[0],t.sy=e.size[1],t.sz=e.size[2])),t},ue.debug.log("d3d_properties.constructor")}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function f(e,t,r){return t&&p(e.prototype,t),r&&p(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var b=f((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.started=!1,this.max_fps=30,this.ms_fps=34,this.lasttime_fps=Date.now(),this.current_fps=0,this.frames=0,this.ready=!1,this.loop=!0,this.modeName="",this.onWindowResize=function(){ue.debug.log("d3d_render.start"),ue.render.renderer.setSize(window.innerWidth,window.innerHeight),void 0!==ue.render.camera&&(ue.render.camera.aspect=window.innerWidth/window.innerHeight,ue.render.camera.updateProjectionMatrix())},this.maxFPS=function(e){ue.debug.log("d3d_render.maxFPS : "+e),ue.render.max_fps=e,ue.render.ms_fps=Math.ceil(1e3/ue.render.max_fps)},this.mode=function(e){ue.debug.log("d3d_render.mode : "+e),ue.render.modeName=e},this.render=function(e,t){if(ue.render.started=!0,"webxr"==ue.render.modeName&&ue.debug.log("d3d_render.render"),ue.render.ready)if(ue.scenes.currentScene){ue.render.frames++;var r=Date.now();if(r>ue.render.lasttime_fps+1e3&&(ue.render.current_fps=Math.round((ue.render.frames+ue.render.current_fps)/2),ue.render.frames=0,ue.render.lasttime_fps=r,ue.render.current_fps<ue.render.max_fps?ue.render.ms_fps>1&&(ue.render.ms_fps-=1):ue.render.current_fps>ue.render.max_fps&&(ue.render.ms_fps+=2)),"webxr"==ue.render.modeName)try{ue.animate.apply().then((function(){ue.render.renderer.render(ue.scenes.getScene("example_1"),ue.render.camera),ue.render.loop&&setTimeout(ue.render.render,ue.render.ms_fps)}))}catch(e){ue.debug.log("d3d_webxr.updateViewer:"+e.toString())}else ue.animate.apply().then((function(){ue.render.renderer.render(ue.scenes.getScene("example_1"),ue.render.camera),ue.render.loop&&setTimeout(ue.render.render,ue.render.ms_fps)}))}else ue.render.loop&&setTimeout(ue.render.render,100);else ue.render.loop&&setTimeout(ue.render.render,1e3)}})),y=r(134);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function g(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var _=g((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scenes={},this.scenesWithObjects={},this.persistentObjects={},this.currentScene=null,this.setScene=function(e){ue.debug.log("d3d_scenes.setScene:"+e),e in t.scenes||(t.scenes[e]=new THREE.Scene,t.scenesWithObjects[e]={}),t.currentScene=e},this.getScene=function(){if(t.currentScene)return t.scenes[t.currentScene]||null;ue.debug.log("d3d_scenes.getScene: Scene is not defined")},this.destructScene=function(e){for(var r in ue.debug.log("d3d_scenes.destructScene:"+e),t.scenesWithObjects[e])void 0!==t.scenesWithObjects[e][r]&&t.scenesWithObjects[e][r].remove(),delete t.scenesWithObjects[e][r];delete t.scenesWithObjects[e]},this.addObject=function(e,r){ue.debug.log("d3d_scenes.addObject:"+e),t.currentScene?(t.scenesWithObjects[t.currentScene][e]=r,t.scenes[t.currentScene].add(r)):ue.debug.log("d3d_scenes.addObject: Scene is not defined")},this.addObjects=function(e){for(var r in e)t.addObject(r,e[r])},this.getObject=function(e){if(t.currentScene)return t.scenesWithObjects[t.currentScene][e]||null;ue.debug.log("d3d_scenes.getObject: Scene is not defined")},this.addPersistant=function(e,r){if(ue.debug.log("d3d_scenes.addPersistant:"+e),!t.persistentObjects[e])return t.persistentObjects[e]=r,t.persistentObjects[e];r instanceof HTMLElement&&r.remove()},ue.debug.log("d3d_scenes.constructor")}));function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function S(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var x=S((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fetchJSON=function(e){return ue.debug.log("d3d_native.fetchJSON:"+e),new Promise((function(t,r){if(void 0===window.nativeInterface)fetch(e).then((function(e){e.ok?t(e.json()):r(new Error("Erreur lors du chargement du fichier JSON."))})).catch((function(e){r(e)}));else try{var n=JSON.parse(window.nativeInterface.fetchJSON(e));t(n)}catch(e){r(e)}}))},this.loadJS=function(e,t){return new Promise((function(r,n){if(void 0===window.nativeInterface)fetch(e).then((function(e){e.ok?e.text().then((function(e){r({data:e,p_params:t})})).catch((function(e){n(e)})):n(new Error("Erreur lors du chargement du fichier JS."))})).catch((function(e){n(e)}));else try{var o=window.nativeInterface.loadJS(e);r({data:o,p_params:t})}catch(e){n(e)}}))},ue.debug.log("d3d_native.constructor")}));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function j(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==E(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function P(e,t,r){return t&&j(e.prototype,t),r&&j(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var O=P((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.camera=function(e){ue.debug.log("d3d_object.camera:"+JSON.stringify(e));var t=ue.properties.from(e),r=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);r.position.set(t.px,t.py,t.pz);var n=new THREE.Vector3(t.tx,t.ty,t.tz);return r.lookAt(n),r},this.ambientlight=function(e){ue.debug.log("d3d_object.ambientlight:"+JSON.stringify(e));var t=ue.properties.from(e);return new THREE.AmbientLight(16777215,t.pow)},this.pointlight=function(e){ue.debug.log("d3d_object.pointlight:"+JSON.stringify(e));var t=ue.properties.from(e),r=new THREE.PointLight(16777215,t.pow,0,2);return r.position.set(t.px,t.py,t.pz),r},this.directionallight=function(e){ue.debug.log("d3d_object.directionallight:"+JSON.stringify(e));var t=ue.properties.from(e),r=new THREE.DirectionalLight(65280,t.pow);return r.position.set(t.px,t.py,t.pz),r.target.position.set(t.tx,t.ty,t.tz),r},this.spotlight=function(e){ue.debug.log("d3d_object.spotlight:"+JSON.stringify(e));var t=ue.properties.from(e),r=new THREE.SpotLight(255,.25,100,Math.PI/6,.25);return r.position.set(t.px,t.py,t.pz),r.target.position.set(t.tx,t.ty,t.tz),r},ue.debug.log("d3d_object.constructor")}));function T(e){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},T(e)}function R(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==T(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===T(o)?o:String(o)),n)}var o}function D(e,t,r){return t&&R(e.prototype,t),r&&R(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var k=D((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.materials={},this.create=function(e,r){var n;ue.debug.log("d3d_materials.create:"+e+", "+JSON.stringify(r)),void 0!==r.basic?n=new THREE.MeshBasicMaterial(r.basic):void 0!==r.phong&&(n=new THREE.MeshPhongMaterial(r.phong)),t.materials[e]=n},this.creates=function(e){for(var r in ue.debug.log("d3d_materials.creates:"+JSON.stringify(e)),e)t.create(r,e[r])},this.get=function(e){return t.materials[e]||null},ue.debug.log("d3d_materials.constructor")}));function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==C(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===C(o)?o:String(o)),n)}var o}function z(e,t,r){return t&&B(e.prototype,t),r&&B(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var A=z((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cube=function(e){ue.debug.log("d3d_geometry.cube:"+JSON.stringify(e));var t=ue.properties.from(e),r=new THREE.BoxGeometry(t.sx,t.sy,t.sz),n=new THREE.Mesh(r,ue.materials.get(e.material));return n.position.set(t.px,t.py,t.pz),n},ue.debug.log("d3d_geometry.constructor")}));function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function X(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==M(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==M(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===M(o)?o:String(o)),n)}var o}function W(e,t,r){return t&&X(e.prototype,t),r&&X(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var N=W((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.animateWithObjects={rotate:{},translate:{}},this.lastApplyTimestamp=performance.now(),this.apply=function(){return new Promise((function(e,r){try{"webxr"==ue.render.modeName&&ue.debug.log("d3d_animate.apply");var n=performance.now(),o=n-t.lastApplyTimestamp;for(var i in t.lastApplyTimestamp=n,t.animateWithObjects.rotate)t.rotateApply(i,o);for(var a in t.animateWithObjects.translate)t.translateApply(a,o);e()}catch(e){r(e)}}))},this.rotate=function(e,r){"speed"in r&&("unit"in r||(r.unit="degree"),"degree"==r.unit&&(r.speed[0]=ue.math.rad(r.speed[0]),r.speed[1]=ue.math.rad(r.speed[1]),r.speed[2]=ue.math.rad(r.speed[2])),r.speed[0]=r.speed[0]/1e3,r.speed[1]=r.speed[1]/1e3,r.speed[2]=r.speed[2]/1e3,t.animateWithObjects.rotate[e]=r)},this.rotateApply=function(e,r){var n=ue.scenes.getObject(e);if(void 0!==n){var o=t.animateWithObjects.rotate[e];n.rotation.x+=o.speed[0]*r,n.rotation.y+=o.speed[1]*r,n.rotation.z+=o.speed[2]*r}},this.translate=function(e,r){"speed"in r&&(r.speed[0]=r.speed[0]/1e3,r.speed[1]=r.speed[1]/1e3,r.speed[2]=r.speed[2]/1e3,t.animateWithObjects.translate[e]=r)},this.translateApply=function(e,r){var n=ue.scenes.getObject(e);if(void 0!==n){var o=t.animateWithObjects.translate[e];if(n.position.x+=o.speed[0]*r,n.position.y+=o.speed[1]*r,n.position.z+=o.speed[2]*r,"range"in o){if(Array.isArray(o.range[0]))if(n.position.x<o.range[0][0]){var i=n.position.x-o.range[0][0];n.position.x=o.range[0][0]+i,o.speed[0]=-o.speed[0]}else if(n.position.x>o.range[0][1]){var a=n.position.x-o.range[0][1];n.position.x=o.range[0][1]-a,o.speed[0]=-o.speed[0]}if(Array.isArray(o.range[1]))if(n.position.y<o.range[1][0]){var s=n.position.y-o.range[1][0];n.position.y=o.range[1][0]+s,o.speed[1]=-o.speed[1]}else if(n.position.y>o.range[1][1]){var d=n.position.y-o.range[1][1];n.position.y=o.range[1][1]-d,o.speed[1]=-o.speed[1]}if(Array.isArray(o.range[2]))if(n.position.z<o.range[2][0]){var u=n.position.z-o.range[2][0];n.position.z=o.range[2][0]+u,o.speed[2]=-o.speed[2]}else if(n.position.z>o.range[2][1]){var l=n.position.z-o.range[2][1];n.position.z=o.range[2][1]-l,o.speed[2]=-o.speed[2]}}}},ue.debug.log("d3d_animate.constructor")}));function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function J(e,t,r){return t&&H(e.prototype,t),r&&H(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var I=J((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.str=function(e){return 0},this.hex=function(e){return 0},ue.debug.log("d3d_color.constructor")}));function V(e){return V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},V(e)}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==V(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==V(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===V(o)?o:String(o)),n)}var o}function q(e,t,r){return t&&F(e.prototype,t),r&&F(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var K=q((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pi=3.14159265,this.pi2=6.2831853,this.deg=function(e){return e/t.pi*180},this.rad=function(e){return e/180*t.pi},ue.debug.log("d3d_math.constructor")}));function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function G(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==U(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===U(o)?o:String(o)),n)}var o}function Q(e,t,r){return t&&G(e.prototype,t),r&&G(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var Y=Q((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(e){ue.debug.log("d3d_webgl.init"),ue.webgl.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),ue.webgl.renderer.setPixelRatio(window.devicePixelRatio),ue.webgl.renderer.setSize(window.innerWidth,window.innerHeight),ue.webgl.renderer.shadowMap.enabled=!0,ue.webgl.renderer.shadowMap.type=THREE.PCFSoftShadowMap,document.body.appendChild(ue.webgl.renderer.domElement),ue.render.renderer=ue.webgl.renderer,ue.render.camera=ue.webgl.camera,window.addEventListener("resize",ue.webgl.onWindowResize,!1)},this.setCamera=function(e){ue.webgl.camera=e,ue.render.camera=ue.webgl.camera},this.start=function(){ue.debug.log("d3d_webgl.start"),ue.webgl.render()},this.stop=function(){ue.debug.log("d3d_webgl.stop")},this.render=function(){ue.debug.log("d3d_webgl.render"),ue.render.mode("webgl"),ue.render.started||ue.render.render()},ue.debug.log("d3d_webgl.constructor")}));function Z(e){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z(e)}function $(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Z(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Z(o)?o:String(o)),n)}var o}var ee=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewer={position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}},this.sessionInit=null,this.currentSession=null,this.XRButton=null,this.mode=null,this.referenceSpace=null,this.enable=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ue.debug.log("d3d_webxr.enable"),ue.webxr.sessionInit=e,ue.webxr.XRButton=document.createElement("button"),ue.webxr.enableButton(),"xr"in navigator?navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?(ue.webxr.mode="immersive-ar",ue.webxr.enableButton()):navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?(ue.webxr.mode="immersive-vr",ue.webxr.enableButton()):ue.webxr.showXRNotSupported()})).catch(ue.webxr.showXRNotAllowed)})).catch(ue.webxr.showXRNotAllowed):!1===window.isSecureContext?ue.debug.log("WEBXR NEEDS HTTPS"):ue.debug.log("WEBXR NOT AVAILABLE")},this.enableButton=function(){ue.debug.log("d3d_webxr.enableButton"),ue.webxr.XRButton.id="XRButton",ue.webxr.XRButton.style.display="button",ue.webxr.XRButton.style.cursor="pointer",ue.webxr.XRButton.style.left="calc(50% - 50px)",ue.webxr.XRButton.style.width="100px",ue.webxr.XRButton.style.position="absolute",ue.webxr.XRButton.style.bottom="20px",ue.webxr.XRButton.style.padding="12px 6px",ue.webxr.XRButton.style.border="1px solid #fff",ue.webxr.XRButton.style.borderRadius="4px",ue.webxr.XRButton.style.background="hsla(0,0%,100%,0.5)",ue.webxr.XRButton.style.color="hsla(0,0%,0%,0.75)",ue.webxr.XRButton.style.font="normal 13px sans-serif",ue.webxr.XRButton.style.textAlign="center",ue.webxr.XRButton.style.opacity="0.5",ue.webxr.XRButton.style.outline="none",ue.webxr.XRButton.style.zIndex="999",ue.webxr.XRButton.textContent="START XR",ue.webxr.XRButton=document.body.appendChild(ue.webxr.XRButton),ue.webxr.XRButton.addEventListener("click",(function(){ue.webxr.onClick()}))},this.onClick=function(){ue.debug.urlsend=!0,ue.debug.log("d3d_webxr.onClick"),null===ue.webxr.currentSession?(ue.render.renderer.xr.enabled=!0,navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor"]}).then(ue.webxr.onSessionStarted)):ue.webxr.currentSession.end()},this.onSessionStarted=function(e){ue.debug.log("d3d_webxr.onSessionStarted"),e.addEventListener("end",ue.webxr.onSessionEnded),ue.webxr.currentSession=e,ue.render.renderer.xr.setSession(ue.webxr.currentSession),ue.webxr.start()},this.onSessionEnded=function(){ue.debug.log("d3d_webxr.onSessionEnded"),ue.webxr.currentSession.removeEventListener("end",ue.webxr.onSessionEnded),ue.webxr.currentSession=null,ue.debug.urlsend=!1},this.showXRNotSupported=function(){ue.debug.log("d3d_webxr.showXRNotSupported"),ue.debug.log("XR NOT SUPPORTED")},this.showXRNotAllowed=function(e){ue.debug.log("d3d_webxr.showXRNotAllowed"),ue.debug.log("Exception when trying to call xr.isSessionSupported",e)},this.start=function(){ue.debug.log("d3d_webxr.start"),ue.webxr.render()},this.stop=function(){ue.webgl.start()},this.updateViewer=function(e){ue.debug.log("d3d_webxr.updateViewer");try{ue.debug.log("d3d_webxr.updateViewer:1");var t=e.getViewerPose(ue.webxr.referenceSpace);ue.debug.log("d3d_webxr.updateViewer:2"),t&&(ue.debug.log("d3d_webxr.updateViewer:3"),t.views.forEach((function(e){ue.debug.log("d3d_webxr.updateViewer:4");var t=e.transform.position,r=e.transform.orientation;ue.debug.log("d3d_webxr.updateViewer:"+t.x+":"+t.y+":"+t.z),ue.webxr.viewer.position={x:t.x,y:t.y,z:t.z},ue.webxr.viewer.orientation={x:r.x,y:r.y,z:r.z}})),ue.debug.log("d3d_webxr.updateViewer:5"))}catch(e){ue.debug.log("d3d_webxr.updateViewer:"+e.toString())}ue.debug.log("d3d_webxr.updateViewer:6")},this.render=function(){ue.debug.log("d3d_webxr.render"),ue.render.mode("webxr"),ue.render.started||(ue.render.loop=!1,ue.render.renderer.setAnimationLoop(ue.render.render))},ue.debug.log("d3d_webxr.constructor")}var t,r;return t=e,(r=[{key:"getPosition",value:function(){return ue.webxr.viewer.position}},{key:"getOrientation",value:function(){return ue.webxr.viewer.orientation}}])&&$(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},te(e)}function re(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==te(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==te(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===te(o)?o:String(o)),n)}var o}function ne(e,t,r){return t&&re(e.prototype,t),r&&re(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var oe=ne((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enabled=!0,this.update=function(){var e,r=window.performance.memory.usedJSHeapSize;e=r<1048576?(r/1024).toFixed(2)+" KB":r<1073741824?(r/1048576).toFixed(2)+" MB":(r/1073741824).toFixed(2)+" GB",t.d3d_monitor_memory.innerText="Memory usage : "+e,t.d3d_monitor_target.innerText="Target FPS : "+ue.render.max_fps,t.d3d_monitor_fps.innerText="Current FPS : "+ue.render.current_fps,t.d3d_monitor_speed.innerText="Frame speed : "+ue.render.ms_fps,setTimeout(ue.monitor.update,1e3)},console.log("d3d_debug.constructor"),this.d3d_monitor_div=document.createElement("div"),this.d3d_monitor_div.className="d3d_monitor",this.d3d_monitor_div.style.position="absolute",this.d3d_monitor_div.style.top="1vw",this.d3d_monitor_div.style.left="89vw",this.d3d_monitor_div.style.width="10vw",this.d3d_monitor_div.style.height="10vw",this.d3d_monitor_div.style.color="white",this.d3d_monitor_div.style.backgroundColor="hsla(210,75%,25%,0.5)",this.d3d_monitor_div.style.overflow="hidden",this.d3d_monitor_div.style.padding="0.5vw",this.d3d_monitor_div.style.fontFamily="arial",this.d3d_monitor_div.style.fontSize="0.7vw",this.d3d_monitor_div.style.lineHeight="0.9vw",this.d3d_monitor_div.style.borderRadius="0.5vw",this.d3d_monitor_div.style.border="solid 0 transparent",this.d3d_monitor_div.style.boxShadow="inset 0 0 0.05vw 0.05vw rgba(32,128,224,0.5), 0 0 0.05vw 0.05vw rgba(32,128,224,0.5), inset 0 0 5vw 0 rgba(32,128,224,0.25)",document.body.appendChild(this.d3d_monitor_div),this.d3d_monitor_memory=document.createElement("div"),this.d3d_monitor_memory.id="d3d_monitor_memory",this.d3d_monitor_div.appendChild(this.d3d_monitor_memory),this.d3d_monitor_target=document.createElement("div"),this.d3d_monitor_target.id="d3d_monitor_target",this.d3d_monitor_div.appendChild(this.d3d_monitor_target),this.d3d_monitor_fps=document.createElement("div"),this.d3d_monitor_fps.id="d3d_monitor_fps",this.d3d_monitor_div.appendChild(this.d3d_monitor_fps),this.d3d_monitor_speed=document.createElement("div"),this.d3d_monitor_speed.id="d3d_monitor_speed",this.d3d_monitor_div.appendChild(this.d3d_monitor_speed),setTimeout(this.update,1e3)}));function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===ie(o)?o:String(o)),n)}var o}function se(e,t,r){return t&&ae(e.prototype,t),r&&ae(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var de=se((function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.init=function(){console.log("dolmen3d.init"),t.debug=new a,t.monitor=new oe,t.properties=new l,t.render=new b,t.loader=new y.l,t.scenes=new _,t.native=new x,t.object=new O,t.materials=new k,t.geometry=new A,t.animate=new N,t.color=new I,t.math=new K,t.webgl=new Y,t.webxr=new ee},this.start=function(){console.log("dolmen3d.start"),ue.webgl.init(),ue.webgl.start()},this.onLoad=function(e){console.log("dolmen3d.onLoad"),t.callback=e},this.tryCallback=function(){console.log("dolmen3d.tryCallback"),"function"==typeof t.callback?t.callback():setTimeout(ue.tryCallback(),100)},console.log("dolmen3d.constructor")}));window.d3d=new de;var ue=window.d3d;ue.init(),window.addEventListener("load",(function(e){ue.tryCallback(),ue.start()}))}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var __webpack_exports__=__webpack_require__(179)})();